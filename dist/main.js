!function(){"use strict";function e(e){e.classList.add("forms_is-open"),document.addEventListener("keydown",n),document.addEventListener("mousedown",r)}var t=function(e){e.classList.remove("forms_is-open"),document.removeEventListener("keydown",n),document.removeEventListener("mousedown",r)};function n(e){var n=document.querySelector(".forms_is-open");"Escape"===e.key&&t(n)}function r(e){var n=document.querySelector(".forms_is-open");(e.target.classList.contains("forms")||e.target.classList.contains("forms__button-close"))&&t(n)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=document.querySelector(".forms__image"),a=document.querySelector(".forms__image-title"),s=document.querySelector("#image-show"),l=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardSelector=n}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__title").textContent=this._name;var e=this._element.querySelector(".card__img");return e.alt=this._name,e.src=this._link,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__button").addEventListener("click",(function(t){e._handleLikeButton(t)})),this._element.querySelector(".card__img").addEventListener("click",(function(){e._handleShowImage()})),this._element.querySelector(".card__delete").addEventListener("click",(function(t){e._handleDeleteCard(t)}))}},{key:"_handleShowImage",value:function(){i.src=this._link,i.alt=this._name,a.textContent=this._name,e(s)}},{key:"_handleLikeButton",value:function(e){e.target.classList.toggle("card__button_active")}},{key:"_handleDeleteCard",value:function(){this._element.remove(),this._element=null}}])&&o(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-input-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-input-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return u(this._inputList).some((function(e){return!e.validity.valid}))}},{key:"_toggleInputError",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=u(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._toggleInputError(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState()}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),h={formSelector:".forms",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error-text_active"},v=document.querySelector(".cards__container"),y=document.querySelector("#edit-profile"),p=document.querySelector("#img-add"),b=document.querySelector("#add-form"),S=(document.querySelector("#edit-form"),document.querySelector(".profile__button-name-edit")),E=document.querySelector(".profile__button-add"),g=y.querySelector(".forms__button-close"),k=p.querySelector(".forms__button-close"),L=document.querySelector(".profile__name"),w=document.querySelector(".profile__about"),q=y.querySelector("#username"),C=y.querySelector("#about"),I=p.querySelector("#title"),B=p.querySelector("#image-link"),j=new m(h,y),x=new m(h,p);j.enableValidation(),x.enableValidation(),y.addEventListener("submit",(function(e){e.preventDefault(),L.textContent=q.value,w.textContent=C.value,t(y)})),S.addEventListener("click",(function(){q.value=L.textContent,C.value=w.textContent,j.resetValidation(),e(y)})),p.addEventListener("submit",(function(e){e.preventDefault(),function(e,t){var n=new l(e,"#card").generateCard();t.prepend(n)}({name:I.value,link:B.value},v),t(p)})),E.addEventListener("click",(function(){b.reset(),x.resetValidation(),e(p)})),g.addEventListener("click",(function(){t(y)})),k.addEventListener("click",(function(){t(p)})),new f({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(e){new l(e,"#card").generateCard()}},".cards__container"),cardsList.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WTdELFlBQzlCZ0UsRUFBU00sTUFBUVIsRUFBVzlELFlBTjVCbUUsRUFBeUJJLGtCQUN6QnpHLEVBQVV3RixNQWlCWkMsRUFBYXBGLGlCQUFpQixVQVU5QixTQUErQk0sR0FDN0JBLEVBQUlnRSxpQkFhTixTQUFvQnRELEVBQU1rRSxHQUN4QixJQUFNbUIsRUFBTyxJQUFJQyxFQUFNdEYsRUFBTSxTQUFTdUYsZUFHdENyQixFQUFlSCxRQUFRc0IsR0FoQnZCRyxDQUNFLENBQ0VwRixLQUFNMEUsRUFBb0JLLE1BQzFCN0UsS0FBTXlFLEVBQWNJLE9BRXRCakIsR0FHRi9FLEVBQVdpRixNQW5CYkcsRUFBbUJ2RixpQkFBaUIsU0E1QnBDLFdBQ0VxRixFQUFVb0IsUUFDVlIsRUFBc0JHLGtCQUN0QnpHLEVBQVV5RixNQTBCWkksRUFBb0J4RixpQkFBaUIsU0FBUyxXQUM1Q0csRUFBV2dGLE1BRWJNLEVBQXdCekYsaUJBQWlCLFNBQVMsV0FDaERHLEVBQVdpRixNQXlCSSxJQUFJYixFQUFRLENBQUVFLE1EckZWLENBQ25CLENBQ0VyRCxLQUFNLGtCQUNORSxLQUFNLG9EQUVSLENBQ0VGLEtBQU0sY0FDTkUsS0FBTSx1REFFUixDQUNFRixLQUFNLGlCQUNORSxLQUFNLDBEQUVSLENBQ0VGLEtBQU0sVUFDTkUsS0FBTSxtREFFUixDQUNFRixLQUFNLHdCQUNORSxLQUFNLG1EQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0saURDK0RWb0QsU0FBUyxTQUFDSSxHQUNRLElBQUl3QixFQUFNeEIsRUFBTSxTQUFTeUIsaUJBRXhDLHFCQUVIRyxVQUFVQyxjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIgIC8vb3BlbiBmb3Jtc1xuIGZ1bmN0aW9uIG9wZW5Qb3B1cChwb3B1cCkge1xuICBwb3B1cC5jbGFzc0xpc3QuYWRkKFwiZm9ybXNfaXMtb3BlblwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIixoYW5kbGVLZXlFc2MpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsaGFuZGxlTW91c2VEb3duKTtcbn1cbi8vIGNsb3NlIGZvcm1zXG4gY29uc3QgY2xvc2VQb3B1cCA9IChwb3B1cCkgPT4ge1xuICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybXNfaXMtb3BlblwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIixoYW5kbGVLZXlFc2MpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsaGFuZGxlTW91c2VEb3duKTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUtleUVzYyhldnQpe1xuICBjb25zdCBjdXJyZW50UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1zX2lzLW9wZW5cIik7XG4gICAgICBpZiAoZXZ0LmtleSA9PT1cIkVzY2FwZVwiKXtcbiAgICAgIGNsb3NlUG9wdXAoY3VycmVudFBvcHVwKTtcbiAgICB9O1xuICB9O1xuICAvL292ZXJsYXkgdG8gY2xvc2UgRWRpdCBQcm9maWxlIHBvcHVwXG5mdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZXZ0KXtcbiAgY29uc3QgY3VycmVudFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3Jtc19pcy1vcGVuXCIpO1xuICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3Jtc1wiKSB8fFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3Jtc19fYnV0dG9uLWNsb3NlXCIpXG4gICAgKXtcbiAgICAgIGNsb3NlUG9wdXAoY3VycmVudFBvcHVwKTtcbiAgICB9XG59O1xuZXhwb3J0IHtvcGVuUG9wdXAsIGNsb3NlUG9wdXB9XG4iLCJpbXBvcnQgeyBvcGVuUG9wdXAgfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcblxuY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybXNfX2ltYWdlXCIpO1xuY29uc3QgcG9wdXBJbWFnZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3Jtc19faW1hZ2UtdGl0bGVcIik7XG5jb25zdCBwb3B1cFNob3dJbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLXNob3dcIik7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yOyAvLyBhc3NpZ25zIHRoZSBzZWxlY3RvciB0byB0aGUgcHJpdmF0ZSBmaWVsZCAoXCIjY2FyZFwiKVxuICB9XG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cbiAgLy9wdWJsaWMgbWV0aG9kXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICAvLyBTdG9yZSB0aGUgbWFya3VwIGluIHRoZSBwcml2YXRlIGZpZWxkIF9lbGVtZW50XG4gICAgLy8gc28gdGhhdCBvdGhlciBlbGVtZW50cyBjYW4gYWNjZXNzIGl0XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAvLyBBZGQgZGF0YVxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltZ1wiKTtcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL2xpa2UgYnV0dG9uXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbihldnQpO1xuICAgICAgfSk7XG4gICAgLy9vcGVuIFNob3cgSW1hZ2UgcG9wdXBcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1nXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVTaG93SW1hZ2UoKTtcbiAgICB9KTtcbiAgICAvL2RlbGV0ZSBjYXJkXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZChldnQpO1xuICAgICAgfSk7XG4gIH1cblxuICBfaGFuZGxlU2hvd0ltYWdlKCkge1xuICAgIHBvcHVwSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICBwb3B1cEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgcG9wdXBJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICBvcGVuUG9wdXAocG9wdXBTaG93SW1hZ2VFbGVtZW50KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKGV2dCkge1xuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2J1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuICBfc2hvd0lucHV0RXJyb3IoZWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID1cbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7ZWxlbWVudC5pZH0taW5wdXQtZXJyb3JgKTtcbiAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfTtcbiAgX2hpZGVJbnB1dEVycm9yKGVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPVxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtlbGVtZW50LmlkfS1pbnB1dC1lcnJvcmApO1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgLy90aGlzLl9pbnB1dExpc3Quc29tZSgoZWxlbWVudCkgPT4gIWVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICAgIHJldHVybiBbLi4udGhpcy5faW5wdXRMaXN0XS5zb21lKChlbGVtZW50KSA9PiAhZWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH07XG5cblxuICBfdG9nZ2xlSW5wdXRFcnJvcihlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG5cbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGVsZW1lbnQsIGVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG5cbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfTtcbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9XG4gICAgICAgIFsuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID1cbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl90b2dnbGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihlbGVtZW50KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICBcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCIvL0NyZWF0ZSBhIGZpbGUgY29uc3RhbnRzLmpzIGFuZFxuLy9tb3ZlIGFsbCB0aGUgZ2xvYmFsIGNvbnN0YW50cywgc3VjaCBhcyBzZXR0aW5ncyxcbi8vaW50byB0aGF0IGZpbGUuIE5vdGUgdGhhdCBET00gZWxlbWVudHMgdGhhdCBhcmUgc2VhcmNoZWQgZm9yXG4vL2FyZW4ndCBleGFjdGx5IGdsb2JhbCBjb25zdGFudHMgc2luY2UgdGhleSBhcmUgc2VhcmNoZWQgZm9yIG9uIHRoZSBwYWdlXG4vL2R1cmluZyBzY3JpcHQgZXhlY3V0aW9uLCBzbyB0aGV5IHNob3VsZCBub3QgYmUgbW92ZWQgdG8gdGhhdCBmaWxlLlxuY29uc3QgZm9ybVZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLmZvcm1zJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmZvcm1fX2J1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19idXR0b25fZGlzYWJsZWQnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ2Zvcm1fX2Vycm9yLXRleHRfYWN0aXZlJ1xufTtcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6ICdZb3NlbWl0ZSBWYWxsZXknLFxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xha2UgTG91aXNlJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdCYWxkIE1vdW50YWlucycsXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGF0ZW1hcicsXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdWYW5vaXNlIE5hdGlvbmFsIFBhcmsnLFxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGFnbyBkaSBCcmFpZXMnLFxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZycsXG4gIH0sXG5dO1xuLy8gV3JhcHBlcnNcbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19jb250YWluZXInKTtcbmNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0LXByb2ZpbGUnKTtcbmNvbnN0IGFkZEltYWdlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbWctYWRkJyk7XG5jb25zdCBpbWFnZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLWZvcm0nKTtcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQtZm9ybScpO1xuXG4vLyBidXR0b25zXG5jb25zdCBvcGVuUHJvZmlsZUVkaXRCdXR0b24gPVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tbmFtZS1lZGl0Jyk7XG5jb25zdCBvcGVuSW1hZ2VBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uLWFkZCcpO1xuY29uc3QgY2xvc2VFZGl0Rm9ybUJ1dHRvbiA9XG4gICAgZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3Jtc19fYnV0dG9uLWNsb3NlJyk7XG5cbmNvbnN0IGNsb3NlQWRkSW1hZ2VGb3JtQnV0dG9uID1cbiAgICBhZGRJbWFnZUZvcm0ucXVlcnlTZWxlY3RvcignLmZvcm1zX19idXR0b24tY2xvc2UnKTtcblxuLy8gcHJvZmlsZSBET00gbm9kZXMgdXBkYXRlcyBpbmZvIG9mIHRoZSBwcm9maWxlXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XG5jb25zdCBwcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Fib3V0Jyk7XG5cbi8vIGZvcm0gZGF0YSBhbmQgZWxlbWVudHNcbmNvbnN0IGlucHV0TmFtZSA9IGVkaXRQcm9maWxlRm9ybS5xdWVyeVNlbGVjdG9yKCcjdXNlcm5hbWUnKTtcbmNvbnN0IGlucHV0Sm9iID0gZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNhYm91dCcpO1xuY29uc3QgaW5wdXRJbWFnZVBsYWNlTmFtZSA9IGFkZEltYWdlRm9ybS5xdWVyeVNlbGVjdG9yKCcjdGl0bGUnKTtcbmNvbnN0IGlucHV0SW1hZ2VVcmwgPSBhZGRJbWFnZUZvcm0ucXVlcnlTZWxlY3RvcignI2ltYWdlLWxpbmsnKTtcblxuZXhwb3J0IHsgZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgaW5pdGlhbENhcmRzLCBjYXJkc0NvbnRhaW5lciwgZWRpdFByb2ZpbGVGb3JtLCBhZGRJbWFnZUZvcm0sIGltYWdlRm9ybSwgcHJvZmlsZUZvcm0sIG9wZW5Qcm9maWxlRWRpdEJ1dHRvbiwgb3BlbkltYWdlQWRkQnV0dG9uLCBjbG9zZUVkaXRGb3JtQnV0dG9uLCBjbG9zZUFkZEltYWdlRm9ybUJ1dHRvbiwgcHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IsIGlucHV0TmFtZSwgaW5wdXRKb2IsIGlucHV0SW1hZ2VQbGFjZU5hbWUsIGlucHV0SW1hZ2VVcmwgfTtcblxuIiwiaW1wb3J0IENhcmRzIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IGNsb3NlUG9wdXAsIG9wZW5Qb3B1cCB9IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vLzhcbmltcG9ydCB7XG4gIGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsXG4gIGluaXRpYWxDYXJkcyxcbiAgY2FyZHNDb250YWluZXIsXG4gIGVkaXRQcm9maWxlRm9ybSxcbiAgYWRkSW1hZ2VGb3JtLFxuICBpbWFnZUZvcm0sXG4gIHByb2ZpbGVGb3JtLFxuICBvcGVuUHJvZmlsZUVkaXRCdXR0b24sXG4gIG9wZW5JbWFnZUFkZEJ1dHRvbixcbiAgY2xvc2VFZGl0Rm9ybUJ1dHRvbixcbiAgY2xvc2VBZGRJbWFnZUZvcm1CdXR0b24sXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlSm9iLFxuICBpbnB1dE5hbWUsXG4gIGlucHV0Sm9iLFxuICBpbnB1dEltYWdlUGxhY2VOYW1lLFxuICBpbnB1dEltYWdlVXJsLFxufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gZm9ybSB2YWxpZGF0aW9uXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgZm9ybVZhbGlkYXRpb25TZXR0aW5ncyxcbiAgZWRpdFByb2ZpbGVGb3JtXG4pO1xuY29uc3QgYWRkSW1hZ2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsXG4gIGFkZEltYWdlRm9ybVxuKTtcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRJbWFnZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyBmdW5jdGlvbiBzaG93IGFkZCBpbWFnZSBmb3JtXG5mdW5jdGlvbiBvcGVuQWRkSW1hZ2VGb3JtKCkge1xuICBpbWFnZUZvcm0ucmVzZXQoKTsgLy8gcmVzZXQgZm9ybVxuICBhZGRJbWFnZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIG9wZW5Qb3B1cChhZGRJbWFnZUZvcm0pO1xufVxuXG4vLyBmdW5jdGlvbiBvcGVuIGVkaXQgZm9ybXNcbmZ1bmN0aW9uIG9wZW5FZGl0UHJvZmlsZUZvcm0oKSB7XG4gIGZpbGxQcm9maWxlRm9ybSgpO1xuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIG9wZW5Qb3B1cChlZGl0UHJvZmlsZUZvcm0pO1xufVxuLy8gcHJlZmlsbCB0aGUgcHJvZmlsZSBmb3JtXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XG4gIGlucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBpbnB1dEpvYi52YWx1ZSA9IHByb2ZpbGVKb2IudGV4dENvbnRlbnQ7XG59XG4vLyBmdW5jdGlvbiB0byBzdWJtaXQgZWRpdCBwcm9maWxlIGluZm8sY2hlY2tzIHRoZSBkYXRhIGlzIGVudGVyZWRcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dE5hbWUudmFsdWU7XG4gIHByb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBpbnB1dEpvYi52YWx1ZTtcbiAgY2xvc2VQb3B1cChlZGl0UHJvZmlsZUZvcm0pO1xufVxuLy8gZXZlbnQgbGlzdG5lcmVuc1xuZWRpdFByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xub3BlblByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuRWRpdFByb2ZpbGVGb3JtKTtcbmFkZEltYWdlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUltYWdlRm9ybVN1Ym1pdCk7XG5vcGVuSW1hZ2VBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BZGRJbWFnZUZvcm0pO1xuY2xvc2VFZGl0Rm9ybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZVBvcHVwKGVkaXRQcm9maWxlRm9ybSk7XG59KTtcbmNsb3NlQWRkSW1hZ2VGb3JtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlUG9wdXAoYWRkSW1hZ2VGb3JtKTtcbn0pO1xuXG4vLyBmdW5jdGlvbiB0byBzdWJtaXQgYW5kIGNoZWNrIGZvciByZXF1aXJlZCBmaWVsZHMgYWRkIGltYWdlIGZvcm1cbmZ1bmN0aW9uIGhhbmRsZUltYWdlRm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHJlbmRlckNhcmQoXG4gICAge1xuICAgICAgbmFtZTogaW5wdXRJbWFnZVBsYWNlTmFtZS52YWx1ZSxcbiAgICAgIGxpbms6IGlucHV0SW1hZ2VVcmwudmFsdWUsXG4gICAgfSxcbiAgICBjYXJkc0NvbnRhaW5lclxuICApO1xuXG4gIGNsb3NlUG9wdXAoYWRkSW1hZ2VGb3JtKTtcbn1cblxuLy8gcmVuZGVyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEsIGNhcmRzQ29udGFpbmVyKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZHMoZGF0YSwgXCIjY2FyZFwiKS5nZW5lcmF0ZUNhcmQoKTsgLy8gcGFzcyBhbiBvYmplY3QgYXMgYW4gYXJndW1lbnRcbiAgLy8gRmlsbCB1cCB0aGUgY2FyZCBhbmQgcmV0dXJuIGl0XG4gIC8vIEFkZCBpdCB0byB0aGUgRE9NXG4gIGNhcmRzQ29udGFpbmVyLnByZXBlbmQoY2FyZCk7XG59XG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oeyBpdGVtczppbml0aWFsQ2FyZHMsXG5yZW5kZXJlcjooaXRlbSk9PntcbiAgY29uc3QgZWxlbWVudCA9IG5ldyBDYXJkcyhpdGVtLCBcIiNjYXJkXCIpLmdlbmVyYXRlQ2FyZCgpO1xufVxufSwgXCIuY2FyZHNfX2NvbnRhaW5lclwiKTtcbi8vIHB1dCBpbml0aWFsIGNhcmRzIGludG8gRE9NXG5jYXJkc0xpc3QucmVuZGVySXRlbXMoKTtcbiJdLCJuYW1lcyI6WyJvcGVuUG9wdXAiLCJwb3B1cCIsImNsYXNzTGlzdCIsImFkZCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUtleUVzYyIsImhhbmRsZU1vdXNlRG93biIsImNsb3NlUG9wdXAiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwiY3VycmVudFBvcHVwIiwicXVlcnlTZWxlY3RvciIsImtleSIsInRhcmdldCIsImNvbnRhaW5zIiwicG9wdXBJbWFnZSIsInBvcHVwSW1hZ2VUaXRsZSIsInBvcHVwU2hvd0ltYWdlRWxlbWVudCIsIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0ZXh0Q29udGVudCIsImltYWdlRWxlbWVudCIsImFsdCIsInNyYyIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZVNob3dJbWFnZSIsIl9oYW5kbGVEZWxldGVDYXJkIiwidG9nZ2xlIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJlbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfaW5wdXRMaXN0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfdG9nZ2xlSW5wdXRFcnJvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInByZXZlbnREZWZhdWx0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsImZvcm1WYWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJjYXJkc0NvbnRhaW5lciIsImVkaXRQcm9maWxlRm9ybSIsImFkZEltYWdlRm9ybSIsImltYWdlRm9ybSIsIm9wZW5Qcm9maWxlRWRpdEJ1dHRvbiIsIm9wZW5JbWFnZUFkZEJ1dHRvbiIsImNsb3NlRWRpdEZvcm1CdXR0b24iLCJjbG9zZUFkZEltYWdlRm9ybUJ1dHRvbiIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUpvYiIsImlucHV0TmFtZSIsImlucHV0Sm9iIiwiaW5wdXRJbWFnZVBsYWNlTmFtZSIsImlucHV0SW1hZ2VVcmwiLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhZGRJbWFnZUZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwidmFsdWUiLCJyZXNldFZhbGlkYXRpb24iLCJjYXJkIiwiQ2FyZHMiLCJnZW5lcmF0ZUNhcmQiLCJyZW5kZXJDYXJkIiwicmVzZXQiLCJjYXJkc0xpc3QiLCJyZW5kZXJJdGVtcyJdLCJzb3VyY2VSb290IjoiIn0=